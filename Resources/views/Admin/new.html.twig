{% extends 'MsiCmfBundle::layout.html.twig' %}

{% block title %}{{ 'Add'|trans }} {{ admin.getLabel() }}{% endblock title %}

{% block actions %}
<button class="btn btn-primary msi_cmf_save"><i class="icon-white icon-ok"></i> Save</button>
<button class="btn btn-primary msi_cmf_save_add"><i class="icon-white icon-ok"></i> Save & Add</button>
<button class="btn btn-primary msi_cmf_save_quit"><i class="icon-white icon-ok"></i> Save & Quit</button>
{% endblock actions %}

{% block sidebar %}
{% include admin.getOption('sidebar_template') %}
{% endblock sidebar %}

{% block content %}
    <form novalidate class="form-crud form-horizontal" action="{{ admin.genUrl('new') }}" method="POST" {{ form_enctype(form) }}>
        {% include admin.getOption('form_template') %}
    </form>
{% endblock %}

{% block js %}
{{ parent() }}
{% include admin.container.getParameter('msi_cmf.tiny_mce') %}
<script>
    $('button.msi_cmf_save').on('click', function() {
        var $form = $('form.form-crud');
        $form.submit();
    });
    $('button.msi_cmf_save_add').on('click', function() {
        var $form = $('form.form-crud');
        $form.attr('action', $.parameterize($form.attr('action'), {'alt': 'add'}));
        $form.submit();
    });
    $('button.msi_cmf_save_quit').on('click', function() {
        var $form = $('form.form-crud');
        $form.attr('action', $.parameterize($form.attr('action'), {'alt': 'quit'}));
        $form.submit();
    });
</script>
{% endblock js %}
